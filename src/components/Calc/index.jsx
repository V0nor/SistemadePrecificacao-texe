import { useState, useEffect } from 'react';
import styled from 'styled-components';
import { CopyToClipboard } from 'react-copy-to-clipboard';

const Container = styled.div`
  background: rgba(0, 0, 0, 0.303);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  backdrop-filter: blur(6.5px);
  -webkit-backdrop-filter: blur(6.5px);
  border-radius: 10px;
  width: 100%;
  padding: 1em;
  display: flex;
  flex-direction: column;
  justify-content: center;
`;
const FormContainer = styled.div`
  border-radius: 5px;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin: auto;
  margin-top: 20px;
`;

const Title = styled.h3`
  font-size: 1.2em;
`;

const Input = styled.input`
  display: flex;
  padding: 1em;
  width: 95%;
  color: #fff !important;
  margin: 0.5em 0;
  border: 2px solid #23232344;
  border-radius: 0.25rem;
  padding: 0.5em;
  background-color: #23232379;
`;

const Button = styled.button`
  padding: 10px 20px;
  background-color: #007bff;
  color: #fff;
  border: none;
  width: 100%;
  text-align: center;
  margin: auto;
  margin-top: 1em;
  border-radius: 5px;
  cursor: pointer;

  &:hover {
    background-color: #0056b3;
  }
  &:disabled {
    background-color: #007bff4d;
    cursor: not-allowed;
  }
`;

const Label = styled.label`
  margin-right: 5px;
  font-size: 14px;
  font-weight: 600;
`;

const FeedbackMessage = styled.span`
  color: greenyellow;
  font-weight: 900;
  margin-top: 10px;
`;

const Result = styled.p`
  background-color: orangered;
  border-radius: 5px;
  color: white;
  padding: 0.5em;
  font-size: 20px;
`;

function CalculadoraAcrescimo() {
  const [valorInicial, setValorInicial] = useState('');
  const [acrescimoPercentual, setAcrescimoPercentual] = useState(42.5);
  const [valorFinal, setValorFinal] = useState('');
  const [copiado, setCopiado] = useState(false);

  useEffect(() => {
    if (valorInicial !== '') {
      const acrescimo = (valorInicial * acrescimoPercentual) / 100;
      const resultado = parseFloat(valorInicial) + acrescimo;
      setValorFinal(`${Math.floor(resultado)},99`);
    } else {
      setValorFinal('');
    }
  }, [valorInicial, acrescimoPercentual]);

  const handleChangeValorInicial = (e) => {
    setValorInicial(e.target.value);
  };

  const handleChangeAcrescimoPercentual = (e) => {
    setAcrescimoPercentual(e.target.value);
  };

  const handleCopy = () => {
    setCopiado(true);
    setTimeout(() => setCopiado(false), 3000);
  };

  return (
    <Container>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        xmlSpace="preserve"
        viewBox="0 0 673.2 373.5"
        width={110}
      >
        <switch>
          <g initial="hidden" animate="visible">
            <path
              fill="#2260FF"
              d="M281.9 247.3c1 .1 2.2.2 3.2.5 14.1 4 28.1 8 42.2 12 .9.3 1.9.4 2.3 1.6-2.1 4.6-5 8.8-8.3 12.7-8.1 9.6-18.1 16.6-29.5 21.6-8.1 3.5-16.5 5.8-25.2 6.9-7.7 1-15.4 1.2-23.2.6-1.7-.1-3.5-.1-5.3-.2-1.2-.1-2.3-.2-3.5-.5-5.4-1.2-11-2.1-16.2-3.9-13.6-4.8-25.6-12.1-35.1-23.3-4.6-5.5-8.3-11.5-11.4-18-2.7-5.7-4.3-11.7-5.4-17.8-1.2-6.2-1.6-12.5-1.2-18.8.2-3.2.1-6.6.8-9.7 1-5.2 2.2-10.4 4-15.5 7.7-22.3 22.8-37.8 44.6-46.8 7.2-3 14.8-4.6 22.5-5.5 8.1-.9 16.3-1.2 24.4-.4 3.1.3 6.3.9 9.4 1.4 3.4.6 6.9 1 10.3 2 21.8 6.6 38.4 19.6 48.5 40.3 3.3 6.7 5.7 13.8 6.9 21.2.4 2.3.3 4.7.7 7.1.9 4.9.6 9.9.4 14.8-.2 3.5-.8 6.9-1.3 10.6H229.1c-3 0-3.5.9-2.8 3.8 1.8 7.5 6.3 12.8 13.2 15.9 2.4 1.1 5.1 1.7 7.8 2.2 8.3 1.4 16.2.1 23.7-3.6 4.6-2.3 8.2-5.5 10.4-10.2 0-.3.2-.6.5-1zM249 206.1h25.2c2.2 0 2.6-.4 2.1-2.6-1-5.5-3.4-10.3-7.6-14.1-3.8-3.3-8.1-5.3-13.3-6-4.2-.6-8.2-.5-12.3.5-5.9 1.3-10.6 4.7-14.1 9.7-2.2 3.1-4.3 6.3-6.5 9.5-.3.4-.6.8-.8 1.2-.3.8 0 1.5.8 1.7.6.1 1.3.1 1.9.1H249zM.6 137.9c0-10.3-.1-20.6-.1-30.9 0-6.2.1-12.5.1-18.7.5-.2 1-.5 1.5-.6.6-.1 1.3 0 1.9 0h174.2c3.6 0 3.6 0 3.6 3.5v45.6c-.1 1.5-.3 1.7-1.9 1.8h-57.5c-1.2 0-1.8.5-1.8 1.7V297c0 3.6 0 3.6-3.7 3.6H64.1c-1.6-.1-1.9-.4-2-2.1V142.3c0-3.9.2-3.8-3.8-3.8H3.6c-1.1 0-2.2.3-3-.6z"
            />
            <path
              fill="#2360FF"
              d="M500.5 144.8c.9 1.6.2 2.5-.5 3.6-4.2 6.4-8.4 12.8-12.7 19.2-11.4 17.3-22.8 34.6-34.2 51.8-1.1 1.7-1.2 2.9 0 4.7 16.1 24.1 32 48.2 48 72.3.7 1.1 1.7 2.2 1 3.9-.5.1-1.1.2-1.7.2h-52.5c-1.3 0-2.2-.4-3-1.6-7.6-12-15.3-24-22.9-36-.7-1.1-1.2-2.3-1.7-3.4-.4-1-1.1-1.3-1.8-1.1-3.1 5-6.2 10-9.3 14.9-5.3 8.4-10.7 16.7-15.9 25.1-1 1.5-2 2.2-3.8 2.1-17.1-.1-34.2 0-51.3-.1-1.1 0-2.1-.2-3.4-.4.3-.8.4-1.2.6-1.6 16.3-24.2 32.7-48.3 49-72.5.3-.4.5-.8.8-1.2.9-1.1.8-2.1 0-3.2-3.4-5.2-6.8-10.5-10.2-15.7-12.4-19.1-24.7-38.3-37.1-57.4-.6-.9-1.2-1.8-2-3.1 1.3-.3 2.2-.6 3.1-.6h52.5c1.4 0 2.2.5 2.9 1.6 7.1 12.1 14.2 24.1 21.3 36.2.7 1.2 1.1 2.5 1.8 3.6.3.5.9 1.1 1.5 1.3.3.1 1-.7 1.3-1.2 7.7-13.2 15.3-26.4 23-39.6.2-.3.3-.5.5-.8.4-.8 1.1-1.1 2-1.1h52.3c.8.1 1.7.1 2.4.1z"
            />
            <path
              fill="#2260FF"
              d="M673.2 232.5c-.2 1-.4 2-.5 3-.3 4.7-.2 4.7-4.9 4.7H564.9c-1.1 0-2.2.1-3.6.2.3 1.4.5 2.4.7 3.5 1.3 7.2 5.7 12.2 12 15.6 2.5 1.3 5.4 2.1 8.3 2.6 5.8 1 11.6.8 17.3-.9 3.9-1.1 7.6-2.8 11-5.2 3-2.2 5.3-5.1 6.9-8.8 1.4.2 2.8.3 4.1.7 4 1.1 7.9 2.3 11.8 3.5 2.7.8 5.5 1.5 8.2 2.3 2.7.8 5.5 1.6 8.2 2.3 2.9.8 5.8 1.6 8.6 2.5 2.3.7 4.5 1.4 6.6 2.1.6 1.4-.2 2.2-.7 3.1-5 9-11.9 16.5-20.1 22.5-10.2 7.5-21.5 12.4-33.9 15.1-13.5 2.9-27 2.8-40.6 1-6.3-.8-12.5-2.3-18.4-4.6-19.9-7.8-35-21-43.9-40.8-2-4.4-3.3-9-4.5-13.7-2.3-9.2-2.2-18.4-1.6-27.8.5-7.5 2.4-14.7 5-21.7 4.7-12.6 12-23.3 22.3-32 10.7-9 22.9-14.7 36.6-17.2 10.6-2 21.4-2.6 32.1-1.6 6.4.6 12.8 1.4 19 3.2 21.6 6.4 38.1 19.1 48.5 39.3 3 5.8 5.2 11.9 6.6 18.3.6 2.8.9 5.8 1.4 8.6.1.4.3.7.4 1v19.2zm-116.3-27.1c.7.3 1.2.6 1.7.6h52.8c.2-.5.3-.7.3-1 .4-3.8-1.3-7-3-10.1-2.8-5.1-7.2-8.5-12.7-10.4-3.8-1.4-7.8-1.7-11.8-1.5-8.4.4-15.2 3.9-20 10.9-2.3 3.3-4.5 6.6-6.7 9.9-.2.5-.3 1-.6 1.6z"
            />
            <path
              fill="#2461FF"
              d="M604.4 70.4c-4.3 1-8.5 1.9-12.8 2.9-7.5 1.7-15 3.4-22.4 5.1-6.6 1.5-11.6 5.4-15.3 11.1-2.6 4-4 8.4-4.9 13-1.4 7-3 14-4.6 21.1-.2.9-.6 1.8-1 3l-.7-2.1c-1.6-6.8-3.2-13.7-4.8-20.5-1-4.1-2.4-8-4.4-11.7-3.1-5.7-7.5-10-13.3-12.6-3.8-1.7-7.8-2.6-11.9-3.5-8.4-1.8-16.8-3.7-25.3-5.5-.5-.1-.9-.3-1.9-.5 3.9-.9 7.2-1.7 10.6-2.5 6.9-1.6 13.8-3.2 20.7-4.9 5.7-1.4 10.9-3.6 15.3-7.6 4.2-3.8 7-8.4 8.2-13.9 2-9.2 4.1-18.4 6.2-27.6.1-.5.3-1 .7-2 1.4 6.1 2.8 11.7 4.1 17.2 1.1 4.6 2.2 9.1 3.2 13.8.9 4.2 3 7.7 5.9 10.8 4.3 4.5 9.5 7.5 15.5 8.9 8.4 2 16.8 3.9 25.2 5.8 2.5.6 5.1 1.2 7.6 1.8.1 0 .1.2.1.4z"
            />
            <path
              fill="#2663FF"
              d="M586.4 0c1.1 4.9 2.1 9.8 3.4 14.6.4 1.5 1.2 2.9 2.2 4.1 2 2.6 4.7 4.3 7.9 5.1 4.6 1.2 9.3 2.2 14 3.3.8.2 1.5.4 2.8.8-5.6 1.3-10.6 2.4-15.7 3.5-6.9 1.5-10.4 5.2-11.8 12.1-.8 3.8-1.6 7.6-2.6 12-.4-1-.6-1.5-.7-2.1-1.1-4.1-2.2-8.1-3.3-12.2-1.5-5.3-5.1-8.4-10.2-9.7-3.6-1-7.3-1.6-10.9-2.5-1.6-.3-3.1-.7-5.2-1.2 1.8-.5 3-.8 4.2-1.1 4.1-1 8.2-1.9 12.3-3 1.8-.5 3.6-1.4 5.1-2.5 2.9-1.9 4.4-4.7 5.1-8 .8-3.7 1.6-7.5 2.5-11.2.2-.7.4-1.4.6-2h.3z"
            />
            <path
              fill="#fff"
              d="M330.5 350.4c6.4 3.5 6.6 10.1 4.4 15.1-1.5 3.4-4.5 5-8 5.8-1.4.3-2.8.6-4.3.6-6.1.1-12.3 0-18.4 0-.2 0-.4-.1-.8-.2v-39.5c.7 0 1.3-.1 2-.1 5.9 0 11.8-.1 17.7 0 1.7 0 3.4.2 4.9.7 3.7 1.3 6.3 3.7 6.4 8 0 1 .4 1.9.3 3-.3 3-1.7 5-4.2 6.6zm-19 14.8h10.4c.6 0 1.3-.1 1.9-.3 3.4-.8 5.2-4.3 3.9-7.4-.4-.9-1.2-1.8-2.1-2.1-1.4-.6-3-.9-4.6-.9-2.5-.1-5.1-.1-7.7 0-.6 0-1.2.1-1.8.2v10.5zm0-17.6h11.3c.5 0 1.1-.2 1.6-.4 1.8-.7 2.5-2.2 2.3-4.5-.2-2-1-2.8-3.1-3.2-4-.9-8-.3-12.2-.4.1 2.9.1 5.5.1 8.5z"
            />
            <path
              fill="#fff"
              d="M468.4 373.5c-3.6-.3-7-.8-10.2-2.4-4.5-2.3-7.2-6.2-8.4-10.8-1.3-4.9-1.2-10.1 0-15.1 2.6-10.9 11-15 20.8-14 5 .5 9.5 2.3 12.5 6.6 2.2 3.1 3.6 6.6 3.6 10.6 0 1.6.6 3.1.5 4.7-.2 3.8-.5 7.6-2.2 11.1-1.9 3.9-4.9 6.7-9.1 7.9-2.5.6-5.1.9-7.5 1.4zm-11.1-21.7c0 1.3-.1 2.6 0 3.8.7 7 4.7 10.6 11.5 10.3 4.9-.2 8.9-3.8 9.6-8.7.5-3.1.8-6.3 0-9.4-.9-3.9-2.3-7.3-6.5-8.9-4.3-1.6-9.8-.2-12.4 3.5-1.8 3-2.3 6.1-2.2 9.4z"
            />
            <path
              fill="#fff"
              d="M496.8 332.2h19.8c1.6 0 3.2.2 4.7.6 6.5 2 9.8 9.6 6.7 15.7-.9 1.7-2.5 3-3.8 4.6.2.1.7.4 1.1.7 1.4.8 2.3 2 2.5 3.6.2 1.2.4 2.4.4 3.6v10.9H520v-9.1c0-1-.1-2.1-.3-3.1-.3-1.6-1.3-2.5-2.8-2.9-.8-.2-1.7-.4-2.6-.4h-9.4c-.1 2.6-.1 5.1-.1 7.7v7.8h-8v-39.7zm8.1 17.3c4.2 0 8.2.1 12.2 0 1.5-.1 2.8-1 3.6-2.5 1.7-3.4-.4-7.4-4.2-7.9-.6-.1-1.1-.1-1.7-.1h-8.1c-.6 0-1.2.1-1.9.2.1 3.5.1 6.8.1 10.3zM243.3 371.8v-39.4c.3-.1.6-.2.9-.2 6.6 0 13.3-.2 19.9 0 5.8.2 9.9 3.5 11.1 8.5 1 4-.3 10-5.2 12.1.5.3.8.5 1.2.7 2.2 1 3.1 2.9 3.2 5 .2 4.4.1 8.9.1 13.4h-8.1c0-2.9.1-5.8 0-8.6 0-1.3-.3-2.6-.5-4-.1-1.5-1.2-2.1-2.5-2.5-.7-.2-1.4-.4-2.1-.4h-9.8c-.4 5.2 0 10.2-.2 15.5-2.7-.1-5.2-.1-8-.1zm8.2-32.7v10.5c3.9 0 7.6.1 11.4 0 3.1-.1 4.3-1.5 4.5-4.6v-2c.1-1.6-.9-2.5-2.2-3.1-.8-.4-1.7-.6-2.5-.6-3.7-.3-7.4-.2-11.2-.2zM101.7 372v-39.6c.7-.1 1.3-.2 1.9-.2 4.5 0 8.9-.1 13.4 0 10.9.3 17.6 6.8 18.3 17.9.3 4.3-.5 8.5-2.3 12.4-2.6 5.7-7.2 9-13.4 9.4-5.8.3-11.7.1-17.9.1zm8.2-6.9c2.8 0 5.5.2 8.2 0 4.6-.5 7-2.7 8.1-7.2.9-3.5.9-7.2.3-10.7-.5-2.9-1.7-5.7-4.7-7-2.5-1.1-9.1-1.5-11.9-.7v25.6zM406 372v-39.6c.3-.1.6-.2.9-.2 5 0 10.1-.2 15.1 0 10.4.6 16.8 6.8 17.6 17.6.3 4.4-.4 8.7-2.2 12.7-2.6 5.8-7.3 9.1-13.6 9.4-5.9.3-11.7.1-17.8.1zm8.1-6.9c2.9 0 5.6.2 8.3 0 4.5-.4 6.9-2.7 8-7 .9-3.6 1-7.3.4-10.9-.6-3.6-2.3-6.6-6.3-7.6-3.4-.8-6.8-.5-10.3-.5-.1 8.7-.1 17.2-.1 26z"
            />
            <path
              fill="#fff"
              d="M194 343.8h-7.7c-.1-.2-.3-.3-.3-.4-.6-3.5-3.1-5.3-7.1-5.4-1.5 0-3 .3-4.5.5-.3 0-.6.2-.9.3-1.5.7-2.4 1.9-2.6 3.5-.2 1.7.8 3 2.2 3.7 1.3.7 2.8 1.2 4.2 1.6 2.5.7 4.9 1.3 7.4 1.9 1 .3 2 .6 3 1 5.4 2 7.6 5 7.6 10.1 0 5.3-2.6 9.2-7.5 11.2-2.1.8-4.2 1.4-6.5 1.4-3.3 0-6.5.1-9.7-1-5.3-1.8-8.4-5.4-9.4-10.9-.1-.3 0-.6.1-1.1h8c.2.5.3 1 .5 1.5.8 2.3 2.4 3.9 4.9 4.3 1.8.3 3.7.5 5.5.3 1.4-.2 3-.7 4.1-1.6 2.8-2.2 2.3-6.1-.9-7.6-1.2-.6-2.6-.9-3.9-1.2-2.1-.5-4.2-.9-6.3-1.5-1.3-.3-2.6-.8-3.9-1.3-5.3-2.2-7.1-5.5-7-10.3.1-5.2 3.1-9.3 8-10.8 5-1.5 9.9-1.4 14.9.7 4.9 2.1 7.1 5.8 7.8 11.1z"
            />
            <path
              fill="#fff"
              d="M377.1 332.8c0 9 .3 18.1 0 27.1-.3 7.8-4.6 11.9-12.4 13.1-2.8.4-5.9.7-8.6 0-6.9-1.8-10.7-5.1-11-13-.2-4.5 0-8.9 0-13.4v-14.2c2.8-.2 5.5 0 8.4-.1 0 1 .1 1.8.1 2.6v23.5c0 2.5.6 4.7 2.6 6.5.7.6 1.4 1.2 2.5 1.2 1.7 0 3.4.2 5-.1 2.9-.5 4.5-2.5 4.9-5.4.1-.9.1-1.9.1-2.9v-25.3h8.1c0 .1.1.2.3.4z"
            />
            <path
              fill="#fff"
              d="M575.3 371.9h-9.1c-.8-2.6-1.6-5.2-2.5-7.9H549c-1 2.6-1.9 5.1-3 7.9h-8.5c.3-1.2.5-2.4.9-3.6 1.2-3.4 2.6-6.8 3.8-10.2 1.7-4.6 3.3-9.2 5-13.8 1.4-3.9 2.8-7.9 4.2-11.9h9.8c4.8 13 9.4 26.2 14.1 39.5zm-24-15.1h10c-1.7-5.2-3.2-10.2-4.8-15.1h-.5c-1.5 4.9-3 9.9-4.7 15.1z"
            />

            <path
              fill="#fff"
              d="M233.7 332.4v6.7c-3.8.2-7.7 0-11.9.1-.1 5.5 0 10.9 0 16.3v16.4h-8.3v-32.6h-11.9v-6.8c10.6-.1 21.2-.1 32.1-.1zM395.6 332.2v39.6h-8.2v-39.5c2.7-.2 5.4-.1 8.2-.1z"
            />
            <path
              fill="#fff"
              d="M145.5 332.3h7.9v39.6h-7.7c-.5-1.6-.7-35-.2-39.6zM293.1 371.9h-7.7c-.5-1.6-.7-35.2-.2-39.5h7.9v39.5z"
            />
          </g>
        </switch>
      </svg>
      <Title>Sistema de precificação</Title>
      <FormContainer>
        <Label>
          Valor Inicial:
          <Input
            type="number"
            value={valorInicial}
            onChange={handleChangeValorInicial}
          />
        </Label>
        <Label>
          Acréscimo (%):
          <Input
            type="number"
            value={acrescimoPercentual}
            onChange={handleChangeAcrescimoPercentual}
          />
        </Label>
        <CopyToClipboard text={valorFinal} onCopy={handleCopy}>
          <Button disabled={!valorFinal}>Copiar Valor Final</Button>
        </CopyToClipboard>
        {copiado && <FeedbackMessage>Copiado!</FeedbackMessage>}
        <Result>
          Valor Final: <b>{valorFinal}</b>
        </Result>
      </FormContainer>
    </Container>
  );
}

export default CalculadoraAcrescimo;
